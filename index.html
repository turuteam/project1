<head>
<title>Headphone connection test</title>
</head>

<body>
<button onclick="updateDevices()">updatedevice</button>

<script type="text/javascript">
  // let's assume we don't have any headphones connected

  const updateDevices = () => {

    let headphonesConnected = false;
    navigator.mediaDevices.enumerateDevices()
      .then(function(devices) {
        // check to see if we have any device with "head" in its name connected
        // like "headset" or "headphones"
        headphonesConnected = devices
          .filter(device => /audio\w+/.test(device.kind))
          .find(device => device.label.toLowerCase().includes('head'))
        ;
      })
    ;

    alert(headphonesConnected);
  };

  // updateDevices();

</script>

</body>
