<head>
<title>Headphone connection test</title>
</head>

<body>
<button onclick="updateDevices()">updatedevice</button>

<script type="text/javascript">
  // let's assume we don't have any headphones connected

  const updateDevices = () => {

    navigator.mediaDevices.enumerateDevices().then(function(MediaDeviceInfo) {
      var filtered = MediaDeviceInfo.filter(function(device){
        return device.kind == "audiooutput" || device.kind == "head";
      });
      if (filtered.length !== 0) {
        console.log(`Headphone is plugged in.`);
      } else {
        console.log(`Headphone is not plugged in.`);
      }
    });
  };

  // updateDevices();

</script>

</body>
