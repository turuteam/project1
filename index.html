<head>
<title>Headphone connection test</title>
</head>

<body>
<button id="myButton"><h1>updatedevice</h1></button>

<script type="text/javascript">
  document.querySelector("#myButton").addEventListener("click", () => {

let check_output = false;
    if (!navigator.mediaDevices?.enumerateDevices) {
      console.log("enumerateDevices() not supported.");
    } else{

    // if (!navigator.mediaDevices.selectAudioOutput) {
    //   console.log("selectAudioOutput() not supported.");
    //   return;
    // }

    // Display prompt and log selected device or error
    navigator.mediaDevices
      .enumerateDevices()
      .then((devices) => {
        devices.forEach((device) => {
        console.log(`${device.kind}: ${device.label} id = ${device.deviceId} , devicelen = ${device.kind.indexOf("audiooutput")}`);
        if (`${device.kind.indexOf("audiooutput")} >= 0`){
          alert("connected");
        }
        });
      })
      .catch((err) => {
        console.error(`${err.name}: ${err.message}`);
      });
    }
  });


</script>

</body>
